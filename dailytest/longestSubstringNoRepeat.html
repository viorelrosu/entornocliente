<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<p>
		Hi, here's your problem today. This problem was recently asked by Microsoft:
	</p>
	<p>
		Given a string, find the length of the longest substring without repeating characters.
	</p>
	<p>
		<form name="form" onsubmit="return false;">
			<input type="text" name="palabra" value="" />
			<button onclick="solution();">Enviar</button>
		</form>
	</p>
	<div id="solutionDiv" style="font-weight: bold;"></div>
	<script type="text/javascript">

		var lengthOfLongestSubstring = function(s) {

	    	if(!!!s.length || typeof s !== 'string' ) return 0;
	    	//if our string is empty or it's not a string, return 0

	    	if(s.length  == 1) return 1;//if the length is 1, return 1;

			let hashTable = {}; //our hashTable to hold our characters and index;
			let longestSubstringLength = 0; //length of longest substring
			let start = 0; //start index
			let length = s.length; //length of the array.

			//convert our strings to an array;
			const strings = s.split('');


			//iterate over the array
			for(let i = 0; i < length; i++) {
					// if the character exist and
					// the value of the character is greater
					// or equal to our start index
			      if( (hashTable[strings[i]] !== undefined) && (hashTable[strings[i]] >= start) ) {
					  //change the value of start to one higher than the value of our current character
			          start = hashTable[strings[i]] + 1;
			      }

				  //add the current index and it's value to the hashTable
			      hashTable[strings[i]] = i;

				  // find the length of the longest substring by comparing
				  // the value with the value of the current index minus the start value plus 1
			      longestSubstringLength = Math.max(longestSubstringLength, (i-start + 1));
			  }

			//return the longestSubstringLength as our final answer
			return longestSubstringLength;
		}

		var lengthOfLongestSubstring2 = function(s) {
		    const len = s.length;
		    if (len < 2) { return len; }
		    let res = [];
		    let tmp = [];

		    [...s].forEach(x => {
		      if (tmp.includes(x)) {
		        tmp = [...tmp.slice(tmp.findIndex(y => y === x ) + 1)];
		      }
		      tmp.push(x);
		      console.log(tmp);
		      if (tmp.length > res.length) { res = tmp; }
		    });
		    console.log(res);
		  return res.length;
		};

		function lengthOfLongestSubstring3(string) {
		    var max = 0, current_string = "", i, char, pos;

		    for (i = 0; i < string.length; i += 1) {
		        char = string.charAt(i);
		        pos = current_string.indexOf(char);
		        if (pos !== -1) {
		            // cut "dv" to "v" when you see another "d"
		            current_string = current_string.substr(pos + 1);
		        }
		        current_string += char;
		        console.log(current_string);
		        max = Math.max(max, current_string.length);
		    }

		    return max;
		}

		function solution(){
			var s = document.form.palabra.value.trim().toLowerCase();
			var longP = lengthOfLongestSubstring3(s);
			document.getElementById('solutionDiv').innerHTML = 'solution: ' + longP;
		}
	</script>
</body>
</html>